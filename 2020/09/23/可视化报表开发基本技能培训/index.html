
<!DOCTYPE html>
<html lang class="loading">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>可视化报表开发基本技能培训 - 茶靡往事</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate">
    <meta name="keywords" content="Finara,"> 
    <meta name="description" content="我特么真是个天才,[toc]
项目简介可视化报表常用于管理驾驶舱或经营决策分析等项目，用户可通过PC或移动设备随时随地分析数据、查看经营指标并作出决策。
在驾驶舱指标体系构建过程中，要多方位、多角度、全景展现企业的各,"> 
    <meta name="author" content="Finara"> 
    <link rel="alternative" href="atom.xml" title="茶靡往事" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.png"> 
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <link rel="stylesheet" href="/css/diaspora.css">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
         (adsbygoogle = window.adsbygoogle || []).push({
              google_ad_client: "ca-pub-8691406134231910",
              enable_page_level_ads: true
         });
    </script>
    <script async custom-element="amp-auto-ads" src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
</head>
</html>
<body class="loading">
    <span id="config-title" style="display:none">茶靡往事</span>
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="icon-home image-icon" href="javascript:;" data-url=""></a>
    <div title="播放/暂停" class="icon-play"></div>
    <h3 class="subtitle">可视化报表开发基本技能培训</h3>
    <div class="social">
        <!--<div class="like-icon">-->
            <!--<a href="javascript:;" class="likeThis active"><span class="icon-like"></span><span class="count">76</span></a>-->
        <!--</div>-->
        <div>
            <div class="share">
                <a title="获取二维码" class="icon-scan" href="javascript:;"></a>
            </div>
            <div id="qr"></div>
        </div>
    </div>
    <div class="scrollbar"></div>
</div>

    <div class="section">
        <div class="article">
    <div class='main'>
        <h1 class="title">可视化报表开发基本技能培训</h1>
        <div class="stuff">
            <span>九月 23, 2020</span>
            
  <ul class="post-tags-list"><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/echarts/">echarts</a></li><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/javascript/">javascript</a></li><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/smartbi/">smartbi</a></li><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/操作手册/">操作手册</a></li><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/数据可视化/">数据可视化</a></li></ul>


        </div>
        <div class="content markdown">
            <p>[toc]</p>
<h2 id="项目简介"><a href="#项目简介" class="headerlink" title="项目简介"></a>项目简介</h2><p>可视化报表常用于管理驾驶舱或经营决策分析等项目，用户可通过PC或移动设备随时随地分析数据、查看经营指标并作出决策。</p>
<p>在驾驶舱指标体系构建过程中，要多方位、多角度、全景展现企业的各项经营考核指标，并通过个性化的图形定制，使实时数据监控变得更加动态、一目了然。</p>
<h3 id="常用工具"><a href="#常用工具" class="headerlink" title="常用工具"></a>常用工具</h3><p>驾驶舱可以使用各种常用的BI开发工具或可视化技术实现，其中常用的BI工具有以下几种：</p>
<ul>
<li><a href="https://wiki.smartbi.com.cn/" target="_blank" rel="noopener">Smartbi</a></li>
<li><a href="https://www.finereport.com/" target="_blank" rel="noopener">Finereport</a></li>
<li><a href="http://www.microstrategy.cn/cn" target="_blank" rel="noopener">MicroStrategy</a></li>
<li><a href="https://help.aliyun.com/product/43570.html" target="_blank" rel="noopener">DataV</a></li>
</ul>
<blockquote>
<p>它们均以简单的配置化操作大大降低了开发者的使用门槛，在行业内的数据项目中也被广泛使用。</p>
</blockquote>
<p>除BI开发工具之外，还有一系列的WEB开发框架用于可视化开发工作，如：</p>
<ul>
<li><a href="https://www.jianshu.com/p/da385a35f68d" target="_blank" rel="noopener">matplotlib</a></li>
<li><a href="https://gallery.echartsjs.com/explore.html" target="_blank" rel="noopener">echarts</a></li>
<li><a href="https://gitee.com/MTrun/big-screen-vue-datav" target="_blank" rel="noopener">vue-datav</a></li>
</ul>
<blockquote>
<p>此类技术均较为底层，对开发人员的技术门槛要求交较高，需要懂得python、js、css、vue等开发语言。</p>
</blockquote>
<p>对比两种技术工具，各自存在自己的优缺点，可根据项目的实际情况合理选择开发方案：</p>
<table>
<thead>
<tr>
<th>比较类型</th>
<th>BI报表工具</th>
<th>原生技术</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>使用门槛</td>
<td>低</td>
<td>高</td>
<td>BI工具一般只需要拖拽</td>
</tr>
<tr>
<td>维护成本</td>
<td>低</td>
<td>高</td>
<td>BI工具只需要调整配置数据，原生技术则需要改代码上版等</td>
</tr>
<tr>
<td>展现效果</td>
<td>一般</td>
<td>良好</td>
<td>原生技术不经过封装，可增加各种动效渲染图形</td>
</tr>
<tr>
<td>样式拓展</td>
<td>一般</td>
<td>良好</td>
<td>原生技术可根据效果需要自行选择插件或框架，上限较高</td>
</tr>
<tr>
<td>用户体验</td>
<td>差</td>
<td>良好</td>
<td>BI报表由于封装的较深，虽然配置化可以实现效果，但由于一些技术实现原因导致刷新、下钻等用户交互体验较差，原生技术则可通过其他技术方案解决问</td>
</tr>
<tr>
<td>开发周期</td>
<td>短</td>
<td>长</td>
<td>原生技术需要写代码，BI报表只需要配置</td>
</tr>
<tr>
<td>开发成本</td>
<td>低</td>
<td>高</td>
<td></td>
</tr>
</tbody></table>
<blockquote>
<p>综上所述，使用BI开发工具进行开发的项目大多是统一采购的产品或已经有的开发工具，而原生技术方案则适合技术储备足够成熟，且想要突出展示效果的场景，如可视化大屏等。</p>
</blockquote>
<h2 id="图形可视化"><a href="#图形可视化" class="headerlink" title="图形可视化"></a>图形可视化</h2><p>由于项目中大多使用BI开发工具作为主框架，本文则主要以Smartbi为起点，详细介绍围绕它来实现的可视化项目是如何运作的。</p>
<p>虽然说Smartbi已经通过集成封装，可以让用户轻松的配置可视化图表，但它提供的预设项依然过于简单，无法满足项目进展过程中日益增加的视觉需求。除简单的配置项外，还需要借助诸如Echart、Html、Css以及Javascript等前端技术扩展图表的样式效果。</p>
<p><img src="http://wx4.sinaimg.cn/mw690/007FUZQ3ly1gisbmyl08lj30kj0gk0t3.jpg" alt="BI框架效果"></p>
<p><img src="http://wx1.sinaimg.cn/mw690/007FUZQ3ly1gisbn5uhrgj30m00ectas.jpg" alt="原生Echarts效果"></p>
<blockquote>
<p>使用原生Echarts的配置项可以根据自己的需求实现各类光彩或形状等配置无法实现的效果，可以使图表做的更特别。</p>
</blockquote>
<h3 id="技术栈"><a href="#技术栈" class="headerlink" title="技术栈"></a>技术栈</h3><p>以Smartbi开发平台为例，开发一套效果可观的可视化页面主要需要以下几类技术：</p>
<ul>
<li>Echarts</li>
<li>Html</li>
<li>Css</li>
<li>Javascript</li>
</ul>
<blockquote>
<p>实际实施中可根据项目的需求情况合理选择对应的技术，或拓展其他组件。</p>
</blockquote>
<h4 id="Echarts"><a href="#Echarts" class="headerlink" title="Echarts"></a>Echarts</h4><p>ECharts是一个使用JavaScript实现的开源可视化库，可以流畅的运行在PC和移动设备上，兼容当前绝大部分浏览器（IE8/9/10/11，Chrome，Firefox，Safari等），提供直观，交互丰富，可高度个性化定制的数据可视化图表。</p>
<p>Echarts作为项目开发过程中使用最为频繁的语言，每个可视化报表开发人员都务必要掌握。</p>
<p>Echarts配置项示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// 指定图表的配置项和数据</span><br><span class="line">var option = &#123;</span><br><span class="line">    title: &#123;</span><br><span class="line">        text: &apos;ECharts 入门示例&apos;</span><br><span class="line">    &#125;,</span><br><span class="line">    tooltip: &#123;&#125;,</span><br><span class="line">    legend: &#123;</span><br><span class="line">        data:[&apos;销量&apos;]</span><br><span class="line">    &#125;,</span><br><span class="line">    xAxis: &#123;</span><br><span class="line">        data: [&quot;衬衫&quot;,&quot;羊毛衫&quot;,&quot;雪纺衫&quot;,&quot;裤子&quot;,&quot;高跟鞋&quot;,&quot;袜子&quot;]</span><br><span class="line">    &#125;,</span><br><span class="line">    yAxis: &#123;&#125;,</span><br><span class="line">    series: [&#123;</span><br><span class="line">        name: &apos;销量&apos;,</span><br><span class="line">        type: &apos;bar&apos;,</span><br><span class="line">        data: [5, 20, 36, 10, 10, 20]</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>图形渲染效果如下：</p>
<p><img src="http://wx4.sinaimg.cn/mw690/007FUZQ3ly1gisbv4kbmfj30gi07c3yo.jpg" alt="代码展示效果"></p>
<p><a href="https://echarts.apache.org/zh/tutorial.html#5%20%E5%88%86%E9%92%9F%E4%B8%8A%E6%89%8B%20ECharts" target="_blank" rel="noopener">学习链接传送门-5分钟上手ECharts</a></p>
<p><a href="https://echarts.apache.org/zh/option.html#title" target="_blank" rel="noopener">配置项手册传送门</a></p>
<p><a href="https://echarts.apache.org/examples/zh/editor.html" target="_blank" rel="noopener">图形预览页面</a></p>
<h4 id="HTML-amp-CSS"><a href="#HTML-amp-CSS" class="headerlink" title="HTML&amp;CSS"></a>HTML&amp;CSS</h4><p>HTML称为超文本标记语言，是一种标识性的语言。它包括一系列标签．通过这些标签可以将网络上的文档格式统一。</p>
<p>在项目开发过程中，HTML和CSS语言主要承担了文本展示的渲染工作，如提示框内容、字体样式、图形样式等。</p>
<p><img src="http://wx4.sinaimg.cn/mw690/007FUZQ3ly1gisc618ee2j311o0hg76b.jpg" alt="使用html和css修改提示框样式"></p>
<blockquote>
<p>如上图所示，html和css通常是配套使用，可以根据需要调整提示框的背景颜色、边框颜色、边框粗细、线型等。</p>
</blockquote>
<p><a href="https://www.w3school.com.cn/h.asp" target="_blank" rel="noopener">教程传送门</a></p>
<h4 id="Javascript"><a href="#Javascript" class="headerlink" title="Javascript"></a>Javascript</h4><p>JavaScript是属于HTML和Web的编程语言，可通过编程丰富前端页面的展示动效，除此之外，JS也在可视化开发工作中承担核心的数据枢纽，不仅可以提供配置项实现不了的效果，也可以通过编程实现数据结构的重组、过滤和再计算等工作，满足开发者不同场景下的开发需求。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">// 使用js语法自定义x轴标签名称</span><br><span class="line">xAxis: &#123;</span><br><span class="line">    data: xAxisData,</span><br><span class="line">    axisTick: &#123;</span><br><span class="line">        show: false</span><br><span class="line">    &#125;,</span><br><span class="line">    axisLine: &#123;</span><br><span class="line">        show: false</span><br><span class="line">    &#125;,</span><br><span class="line">    axisLabel: &#123;</span><br><span class="line">        show: true,</span><br><span class="line">        margin: 25,</span><br><span class="line">        align: &apos;center&apos;,</span><br><span class="line">        formatter: function(params, index) &#123;</span><br><span class="line">            return &apos;&#123;a|&apos; + (seriesData1[index] / sum * 100).toFixed(2) + &apos;%&#125;&apos; + &apos;\n&apos; + &apos;&#123;b|&apos; + params + &apos;&#125;&apos;;</span><br><span class="line">        &#125;,</span><br><span class="line">        textStyle: &#123;</span><br><span class="line">            fontSize: 14,</span><br><span class="line">            color: &apos;#ffffff&apos;,</span><br><span class="line">            rich: &#123;</span><br><span class="line">                a: &#123;</span><br><span class="line">                    fontSize: 12,</span><br><span class="line">                    color: &apos;#ffffff&apos;</span><br><span class="line">                &#125;,</span><br><span class="line">                b: &#123;</span><br><span class="line">                    height: 20,</span><br><span class="line">                    fontSize: 14,</span><br><span class="line">                    color: &apos;#ffffff&apos;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    interval: 0</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<blockquote>
<p>JS很简单，知道自己要什么样的效果，直接去百度搜即可。</p>
</blockquote>
<p><a href="https://www.w3school.com.cn/js/index.asp" target="_blank" rel="noopener">JS教程传送门</a></p>
<h3 id="图表分类"><a href="#图表分类" class="headerlink" title="图表分类"></a>图表分类</h3><p>常用图形包括但不限于：</p>
<ul>
<li><a href="https://baike.baidu.com/item/%E6%9F%B1%E5%BD%A2%E5%9B%BE/10816534?fromtitle=%E6%9F%B1%E7%8A%B6%E5%9B%BE&fromid=10963683&fr=aladdin" target="_blank" rel="noopener">柱形图</a></li>
<li><a href="https://baike.baidu.com/item/%E6%8A%98%E7%BA%BF%E5%9B%BE" target="_blank" rel="noopener">折线图</a></li>
<li><a href="https://baike.baidu.com/item/%E9%A5%BC%E5%9B%BE" target="_blank" rel="noopener">饼图</a></li>
<li><a href="https://baike.baidu.com/item/%E9%9D%A2%E7%A7%AF%E5%9B%BE" target="_blank" rel="noopener">面积图</a></li>
<li><a href="https://baike.baidu.com/item/%E6%95%A3%E7%82%B9%E5%9B%BE" target="_blank" rel="noopener">散点图</a></li>
<li><a href="https://baike.baidu.com/item/%E7%9B%B4%E6%96%B9%E5%9B%BE/1103834" target="_blank" rel="noopener">直方图</a></li>
<li><a href="https://baike.baidu.com/item/%E7%AE%B1%E5%BD%A2%E5%9B%BE/10671164" target="_blank" rel="noopener">箱形图</a></li>
<li><a href="https://baike.baidu.com/item/%E6%9D%A1%E5%BD%A2%E5%9B%BE" target="_blank" rel="noopener">条形图</a></li>
<li><a href="https://baike.baidu.com/item/%E6%A0%91%E7%8A%B6%E5%9B%BE" target="_blank" rel="noopener">树状图</a></li>
<li><a href="https://baike.baidu.com/item/%E6%B0%94%E6%B3%A1%E5%9B%BE" target="_blank" rel="noopener">气泡图</a></li>
<li><a href="https://baike.baidu.com/item/%E7%83%AD%E5%8A%9B%E5%9B%BE" target="_blank" rel="noopener">热力图</a></li>
<li><a href="https://baike.baidu.com/item/%E7%BB%84%E5%90%88%E5%9B%BE%E5%BD%A2/3747762" target="_blank" rel="noopener">组合图</a></li>
</ul>
<p>面对您面前的数据，如何做适合它的图形？这个问题既需要思考，也需要实验。</p>
<p>我们可以从两个方面思考，其中第一方面：</p>
<ul>
<li>从数据可视化的数据入手，了解数据的概况，<strong>知道数据的变量个数和各变量的类型</strong></li>
<li>思考您的可视化是<strong>单个变量的可视化，还是双变量可视化，还是多变量的可视化</strong></li>
<li>确定属于是那种可视化方式后，进一步看变量的类型</li>
</ul>
<p>其中，单变量的可视化中：</p>
<ul>
<li><p>若是单变量是离散的变量，可以绘制柱形图或者条形图</p>
</li>
<li><p>若是单变量是连续的变量，可以绘制直方图或者箱形图</p>
</li>
</ul>
<blockquote>
<p>若是为双变量可视化，第一个变量是离散的，第二个变量是连续的，请问适合用什么图形表示？两个变量都是连续的，请问适合用什么图形表示？（请思考）。</p>
</blockquote>
<p>第二方面：</p>
<p>首先，清楚数据可视化的目标，是要研究<strong>分布</strong>，还是了解<strong>关系</strong>；是查看<strong>对比</strong>，还是分析<strong>组合</strong>，不同目标，会有不同数据可视化。</p>
<p>接下来，根据数据可视化的目标，选择<strong>数据合适的变量，了解变量的个数</strong>和类型，此时可以借用第一个方面的思考，协助选择合适的图形。</p>
<p>第三，根据<strong>数据可视化的目标和数据可视化的数据，结合合适的工具绘制图形，然后进行修饰，直到满足需要</strong>。</p>
<p>借用一幅图，来总结上面两方面的思考：</p>
<p><img src="http://wx4.sinaimg.cn/mw690/007FUZQ3ly1gite9n1b2xj30u00s5419.jpg" alt="图形选择分类"></p>
<p><a href="https://gallery.echartsjs.com/explore.html#sort=rank~timeframe=all~author=all" target="_blank" rel="noopener">可视化图形设计案例传送门</a></p>
<h2 id="Smartbi可视化报表开发"><a href="#Smartbi可视化报表开发" class="headerlink" title="Smartbi可视化报表开发"></a>Smartbi可视化报表开发</h2><h3 id="创建数据源"><a href="#创建数据源" class="headerlink" title="创建数据源"></a>创建数据源</h3><p>略</p>
<h3 id="创建数据集"><a href="#创建数据集" class="headerlink" title="创建数据集"></a>创建数据集</h3><p>略</p>
<h3 id="创建电子表格"><a href="#创建电子表格" class="headerlink" title="创建电子表格"></a>创建电子表格</h3><p>默认需要使用Office-Excel进行可视化页面开发，并需要安装SmartbiExcel插件。</p>
<blockquote>
<p>WPS不支持照相机功能，无法自适应文本位置。</p>
</blockquote>
<p><a href="https://wiki.smartbi.com.cn/pages/viewpage.action?pageId=44501745" target="_blank" rel="noopener">Smartbi-电子表格开发wiki</a></p>
<h3 id="需求拆分"><a href="#需求拆分" class="headerlink" title="需求拆分"></a>需求拆分</h3><p>观察设计图，将设计图拆分为各个开发单元。</p>
<p><img src="http://wx1.sinaimg.cn/mw690/007FUZQ3ly1gitfocyxblj30ku380gvq.jpg" alt="设计图案例"></p>
<h4 id="开发规范"><a href="#开发规范" class="headerlink" title="开发规范"></a>开发规范</h4><p>为保证报表协同开发的最终展示效果，开发过程中必须要严格按照设计图的色码、尺寸布局等参数进行开发。</p>
<p>具体图形尺寸及切图可从摹客中自行查看或导出。</p>
<p><img src="http://wx2.sinaimg.cn/mw690/007FUZQ3ly1gitg4mwzvcj30p50js77d.jpg" alt="image"></p>
<p>其中规范参数包含但不限于以下：</p>
<ul>
<li>BANNER图片大小（不可拉伸，默认以图片宽度设置为页面宽度）</li>
<li>背景底色</li>
<li>页面区域左右两边的空白单元格宽度</li>
<li>图形区域背景框宽度与圆角半径</li>
<li>标题及各类文本字体、字号与色号等</li>
<li>可视化图表中文本的字体、字号与色号等</li>
<li>可视化图表边线间距</li>
<li>可视化图表样式（与设计图保持一致）</li>
</ul>
<p><a href="https://app.mockplus.cn/app/-x8HC4s0y/design" target="_blank" rel="noopener">摹客原型图传送门</a></p>
<h4 id="页签"><a href="#页签" class="headerlink" title="页签"></a>页签</h4><p>页签为Smartbi App自带的报表声明，与Excel的Sheet页名称一致，当存在多个Sheet页时，页签部分会显示为对应的按钮。</p>
<p><img src="http://wx3.sinaimg.cn/mw690/007FUZQ3ly1gitfqr46n2j30jb02fjro.jpg" alt="image"></p>
<blockquote>
<p>Sheet签的展示效果需要实际环境中验证，原厂演示中是支持该效果的。</p>
</blockquote>
<h4 id="背景色"><a href="#背景色" class="headerlink" title="背景色"></a>背景色</h4><p>设置页面区域，并将背景色调整为设计图底色（如果画板中没有指定颜色，则需要在自定义中添加）。</p>
<p><img src="http://wx3.sinaimg.cn/mw690/007FUZQ3ly1gitfxi1d8wj30fs0n30w0.jpg" alt="image"></p>
<h4 id="背景图"><a href="#背景图" class="headerlink" title="背景图"></a>背景图</h4><p>从<a href="https://app.mockplus.cn/app/-x8HC4s0y/design" target="_blank" rel="noopener">摹客</a>中导出banner图片：</p>
<p><img src="http://wx3.sinaimg.cn/mw690/007FUZQ3ly1gitgcvy6slj30af04wmxz.jpg" alt="image"></p>
<p>为保证背景图的清晰度，默认以实际开发尺寸进行绘制，导入背景图后禁止拉伸图形大小，防止影响展示效果，且可根据图片宽度设置页面宽度。</p>
<h4 id="绘图板"><a href="#绘图板" class="headerlink" title="绘图板"></a>绘图板</h4><p>页面的图表区域是由一个个的绘图板组成，其中包含背景框、标题、标题分隔线和图表组成，实际开发过程中可根据图形的高度设置绘图板的高度。</p>
<p><img src="http://wx2.sinaimg.cn/mw690/007FUZQ3ly1gitghz2rulj30a708wjrz.jpg" alt="image"></p>
<blockquote>
<p>为保证图形的展示效果，绘图板的宽度与设计图保持一致，高度可根据图表的实际情况进行加长。</p>
</blockquote>
<blockquote>
<p>绘图板的圆角半径必须固定，禁止拉伸，防止拉伸导致的变形。</p>
</blockquote>
<p>将整体页面的绘图区域拆分完成后可再细化绘图区域的开发内容：</p>
<ul>
<li>标题+单位</li>
<li>标题分割线</li>
<li>图表（含图例、图表样式等）</li>
</ul>
<blockquote>
<p>为保证文本的展示效果，防止错位等情况，均需要使用excel的照相机功能</p>
</blockquote>
<h3 id="页面开发流程"><a href="#页面开发流程" class="headerlink" title="页面开发流程"></a>页面开发流程</h3><p>页面开发所需要的元素都准备完毕后即可进入开发阶段，具体流程为：</p>
<ul>
<li>导入BANNER图片</li>
<li>设置左右空白单元列</li>
<li>设置背景区域并填充背景色</li>
<li>插入绘图板</li>
<li>插入标题及单位</li>
<li>插入Echart图表（含修改图表样式）</li>
<li>将多个绘图板逐个添加在页面中完成页面</li>
</ul>
<blockquote>
<p>如果Smartbi集成的Echarts插件无法实现展示效果，则需要在高级-拓展属性中添加额外的配置项代码。</p>
</blockquote>
<h4 id="Echarts图表开发"><a href="#Echarts图表开发" class="headerlink" title="Echarts图表开发"></a>Echarts图表开发</h4><p>由于在Excel中开发Echarts拓展图表较为繁琐，可先在本地环境中开发图表代码，完毕后根据实际情况填充至拓展属性中。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;第一个 ECharts 实例&lt;/title&gt;</span><br><span class="line">    &lt;!-- 引入 echarts.js --&gt;</span><br><span class="line">    &lt;script src=&quot;https://cdn.staticfile.org/echarts/4.3.0/echarts.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;!-- 为ECharts准备一个具备大小（宽高）的Dom --&gt;</span><br><span class="line">    &lt;div id=&quot;main&quot; style=&quot;width: 600px;height:400px;&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">        // 基于准备好的dom，初始化echarts实例</span><br><span class="line">        var myChart = echarts.init(document.getElementById(&apos;main&apos;));</span><br><span class="line"> </span><br><span class="line">        // 指定图表的配置项和数据</span><br><span class="line">        var option = &#123;</span><br><span class="line">            title: &#123;</span><br><span class="line">                text: &apos;第一个 ECharts 实例&apos;</span><br><span class="line">            &#125;,</span><br><span class="line">            tooltip: &#123;&#125;,</span><br><span class="line">            legend: &#123;</span><br><span class="line">                data:[&apos;销量&apos;]</span><br><span class="line">            &#125;,</span><br><span class="line">            xAxis: &#123;</span><br><span class="line">                data: [&quot;衬衫&quot;,&quot;羊毛衫&quot;,&quot;雪纺衫&quot;,&quot;裤子&quot;,&quot;高跟鞋&quot;,&quot;袜子&quot;]</span><br><span class="line">            &#125;,</span><br><span class="line">            yAxis: &#123;&#125;,</span><br><span class="line">            series: [&#123;</span><br><span class="line">                name: &apos;销量&apos;,</span><br><span class="line">                type: &apos;bar&apos;,</span><br><span class="line">                data: [5, 20, 36, 10, 10, 20]</span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;;</span><br><span class="line"> </span><br><span class="line">        // 使用刚指定的配置项和数据显示图表。</span><br><span class="line">        myChart.setOption(option);</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>上述代码是一个简单的Echarts页面实例，如果在内网环境中使用，则需要将echarts文件单独下下来保存至本地，并改为本地路径。</p>
<p>实际在smartbi中配置只需要option的配置项即可，其余部分会自动填充。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">//Smartbi拓展属性代码</span><br><span class="line">&#123;</span><br><span class="line">title: &#123;</span><br><span class="line">    text: &apos;第一个 ECharts 实例&apos;</span><br><span class="line">&#125;,</span><br><span class="line">tooltip: &#123;&#125;,</span><br><span class="line">legend: &#123;</span><br><span class="line">    data:[&apos;销量&apos;]</span><br><span class="line">&#125;,</span><br><span class="line">xAxis: &#123;</span><br><span class="line">    data: [&quot;衬衫&quot;,&quot;羊毛衫&quot;,&quot;雪纺衫&quot;,&quot;裤子&quot;,&quot;高跟鞋&quot;,&quot;袜子&quot;]</span><br><span class="line">&#125;,</span><br><span class="line">yAxis: &#123;&#125;,</span><br><span class="line">series: [&#123;</span><br><span class="line">    name: &apos;销量&apos;,</span><br><span class="line">    type: &apos;bar&apos;,</span><br><span class="line">    data: [5, 20, 36, 10, 10, 20]</span><br><span class="line">&#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>当需要使用数据集中的数据作为轴标签或数据时，需要删除Echarts代码中的data属性，并使用Smartbi中的宏代码进行数据覆盖。</p>
</blockquote>
<h4 id="复杂图表开发"><a href="#复杂图表开发" class="headerlink" title="复杂图表开发"></a>复杂图表开发</h4><p><img src="http://wx2.sinaimg.cn/mw690/007FUZQ3ly1gitghz2rulj30a708wjrz.jpg" alt="image"></p>
<p>以上述复杂的图形为例，需要自定义的项目包含：</p>
<ul>
<li>堆积图的颜色</li>
<li>堆积图间距</li>
<li>线图的Symbol样式</li>
<li>X轴标签格式</li>
<li>提示框文本格式</li>
<li>滚动条</li>
</ul>
<p>先根据设计图编写Echarts代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line">//echarts代码范例</span><br><span class="line">option = &#123;</span><br><span class="line">    backgroundColor:&apos;#ffffff&apos;,</span><br><span class="line">    legend: &#123;</span><br><span class="line">        top: &apos;6%&apos;,</span><br><span class="line">        left: &apos;35%&apos;,</span><br><span class="line">        itemWidth: 10,</span><br><span class="line">        itemHeight: 10,</span><br><span class="line">        icon:&apos;circle&apos;,</span><br><span class="line">        // padding: [5, 10],</span><br><span class="line">        textStyle: &#123;</span><br><span class="line">            fontSize: 12,</span><br><span class="line">            color: &apos;#6D7075&apos;,</span><br><span class="line">            padding: [3, 0, 0, 0]</span><br><span class="line">        &#125;,</span><br><span class="line">        data: [&apos;总资产&apos;, &apos;净资产&apos;, &apos;负债总额&apos;]</span><br><span class="line">    &#125;,</span><br><span class="line">    grid: &#123;</span><br><span class="line">        left: &apos;50&apos;,</span><br><span class="line">        right: &apos;50&apos;,</span><br><span class="line">        bottom: &apos;100&apos;,</span><br><span class="line">        top:&apos;100&apos;,</span><br><span class="line">        containLabel: true</span><br><span class="line">    &#125;,</span><br><span class="line">    tooltip:&#123;</span><br><span class="line">        show:true,</span><br><span class="line">        trigger: &apos;axis&apos;, //触发类型；轴触发，axis则鼠标hover到一条柱状图显示全部数据，item则鼠标hover到折线点显示相应数据，</span><br><span class="line">        axisPointer: &#123; //坐标轴指示器，坐标轴触发有效，</span><br><span class="line">            type: &apos;line&apos;, //默认为line，line直线，cross十字准星，shadow阴影</span><br><span class="line">    		crossStyle: &#123;</span><br><span class="line">                color: &apos;#fff&apos;</span><br><span class="line">    		&#125;</span><br><span class="line">	    &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    dataZoom: [&#123;</span><br><span class="line">      type: &apos;slider&apos;,</span><br><span class="line">      fillerColor:&quot;#B0D5FF&quot;,</span><br><span class="line">      backgroundColor:&apos;#ffffff&apos;, </span><br><span class="line">      handleIcon: &apos;M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z&apos;,</span><br><span class="line">      handleStyle: &#123;</span><br><span class="line">        color: &apos;#fff&apos;,</span><br><span class="line">        shadowBlur: 3,</span><br><span class="line">        shadowColor: &apos;rgba(0, 0, 0, 0.6)&apos;,</span><br><span class="line">        shadowOffsetX: 2,</span><br><span class="line">        shadowOffsetY: 2</span><br><span class="line">      &#125;,</span><br><span class="line">      show: true,</span><br><span class="line">      height:&apos;2%&apos;,</span><br><span class="line">      xAxisIndex: 0,</span><br><span class="line">      left: &apos;100&apos;,</span><br><span class="line">      right: &apos;100&apos;,</span><br><span class="line">      bottom: 40,</span><br><span class="line">      start: 0,</span><br><span class="line">      end: 45 //初始化滚动条</span><br><span class="line">    &#125;],</span><br><span class="line">    xAxis: &#123;</span><br><span class="line">        type: &apos;category&apos;,</span><br><span class="line">        axisLabel: &#123;</span><br><span class="line">            color: &apos;#333333&apos;</span><br><span class="line">        &#125;,</span><br><span class="line">        axisLine: &#123;</span><br><span class="line">            lineStyle: &#123;</span><br><span class="line">                color: &apos;#B3B3B3&apos;</span><br><span class="line">            &#125;,</span><br><span class="line">            width: 5</span><br><span class="line">        &#125;,</span><br><span class="line">        axisTick: &#123;</span><br><span class="line">            show: false,</span><br><span class="line">        &#125;,</span><br><span class="line">        data: [&apos;2020年1月&apos;, &apos;2020年2月&apos;, &apos;2020年3月&apos;, &apos;2020年4月&apos;, &apos;2020年5月&apos;, &apos;2020年6月&apos;, &apos;2020年7月&apos;, &apos;2020年8月&apos;, &apos;2020年9月&apos;, &apos;2020年10月&apos;, &apos;2020年11月&apos;, &apos;2020年12月&apos;]</span><br><span class="line">    &#125;,</span><br><span class="line">    yAxis: &#123;</span><br><span class="line">        type: &apos;value&apos;,</span><br><span class="line">        axisLabel: &#123;</span><br><span class="line">            show:false,</span><br><span class="line">            color: &apos;#96A4F4&apos;</span><br><span class="line">        &#125;,</span><br><span class="line">        axisLine: &#123;</span><br><span class="line">            show:false,</span><br><span class="line">            lineStyle: &#123;</span><br><span class="line">                color: &apos;#96A4F4&apos;</span><br><span class="line">            &#125;,</span><br><span class="line">            width: 5</span><br><span class="line">        &#125;,</span><br><span class="line">        axisTick: &#123;</span><br><span class="line">            show: false,</span><br><span class="line">        &#125;,</span><br><span class="line">        splitLine: &#123;</span><br><span class="line">            show:false,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    series: [</span><br><span class="line">        &#123;</span><br><span class="line">            name: &apos;总资产&apos;,</span><br><span class="line">            type: &apos;bar&apos;,</span><br><span class="line">            stack: &apos;总量&apos;,</span><br><span class="line">            barWidth: &apos;10px&apos;,</span><br><span class="line">            itemStyle:&#123;</span><br><span class="line">                normal:&#123;</span><br><span class="line">                    color:&apos;#2461DB&apos;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            label: &#123;</span><br><span class="line">                show: false,</span><br><span class="line">                position: &apos;insideRight&apos;</span><br><span class="line">            &#125;,</span><br><span class="line">            data: [1320, 1302, 901, 634, 1390, 1330, 1320, 1000, 500, 1320, 1000, 500]</span><br><span class="line">        &#125;,&#123;</span><br><span class="line">            name: &apos;净资产&apos;,</span><br><span class="line">            type: &apos;bar&apos;,</span><br><span class="line">            stack: &apos;总量&apos;,</span><br><span class="line">            barWidth: &apos;10px&apos;,</span><br><span class="line">            itemStyle:&#123;</span><br><span class="line">                normal:&#123;</span><br><span class="line">                    color:&apos;#13C2C2&apos;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            label: &#123;</span><br><span class="line">                show: false,</span><br><span class="line">                position: &apos;insideRight&apos;</span><br><span class="line">            &#125;,</span><br><span class="line">            data: [320, 302, 301, 334, 390, 330, 320, 100, 50, 320, 100, 50]</span><br><span class="line">        &#125;,&#123;</span><br><span class="line">            name: &apos;负债总额&apos;,</span><br><span class="line">            type: &apos;line&apos;,</span><br><span class="line">            stack: &apos;总量2&apos;,</span><br><span class="line">            symbol:&apos;circle&apos;,</span><br><span class="line">            symbolSize:&apos;6&apos;,</span><br><span class="line">            label: &#123;</span><br><span class="line">                show: false,</span><br><span class="line">                position: &apos;insideRight&apos;</span><br><span class="line">            &#125;,</span><br><span class="line">            itemStyle:&#123;</span><br><span class="line">                normal:&#123;</span><br><span class="line">                    color:&apos;#51AAFF&apos;,</span><br><span class="line">                    borderColor:&apos;#FFFFFF&apos;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            lineStyle:&#123;</span><br><span class="line">              normal:&#123;</span><br><span class="line">                  color:&apos;#51AAFF&apos;,</span><br><span class="line">                  lineWidth:&apos;2px&apos;</span><br><span class="line">              &#125;  </span><br><span class="line">            &#125;,</span><br><span class="line">            data: [1020, 902, 601, 334, 790, 530, 620, 500, 150, 620, 500, 150]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;;</span><br><span class="line">myChart.setOption(option);</span><br></pre></td></tr></table></figure>

<p>拆分代码块，将<code>data</code>等无法在Echarts扩展属性中添加的部分剥离出，调整后的smartbi代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line">// 修改后的Smartbi-扩展属性代码</span><br><span class="line">&#123;</span><br><span class="line">    backgroundColor:&apos;#ffffff&apos;,</span><br><span class="line">    legend: &#123;</span><br><span class="line">        top: &apos;6%&apos;,</span><br><span class="line">        left: &apos;35%&apos;,</span><br><span class="line">        itemWidth: 10,</span><br><span class="line">        itemHeight: 10,</span><br><span class="line">        icon:&apos;circle&apos;,</span><br><span class="line">        // padding: [5, 10],</span><br><span class="line">        textStyle: &#123;</span><br><span class="line">            fontSize: 12,</span><br><span class="line">            color: &apos;#6D7075&apos;,</span><br><span class="line">            padding: [3, 0, 0, 0]</span><br><span class="line">        &#125;,</span><br><span class="line">        data: [&apos;总资产&apos;, &apos;净资产&apos;, &apos;负债总额&apos;]</span><br><span class="line">    &#125;,</span><br><span class="line">    grid: &#123;</span><br><span class="line">        left: &apos;50&apos;,</span><br><span class="line">        right: &apos;50&apos;,</span><br><span class="line">        bottom: &apos;100&apos;,</span><br><span class="line">        top:&apos;100&apos;,</span><br><span class="line">        containLabel: true</span><br><span class="line">    &#125;,</span><br><span class="line">    tooltip:&#123;</span><br><span class="line">        show:true,</span><br><span class="line">        trigger: &apos;axis&apos;, //触发类型；轴触发，axis则鼠标hover到一条柱状图显示全部数据，item则鼠标hover到折线点显示相应数据，</span><br><span class="line">        axisPointer: &#123; //坐标轴指示器，坐标轴触发有效，</span><br><span class="line">            type: &apos;line&apos;, //默认为line，line直线，cross十字准星，shadow阴影</span><br><span class="line">    		crossStyle: &#123;</span><br><span class="line">                color: &apos;#fff&apos;</span><br><span class="line">    		&#125;</span><br><span class="line">	    &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    dataZoom: [&#123;</span><br><span class="line">      type: &apos;slider&apos;,</span><br><span class="line">      fillerColor:&quot;#B0D5FF&quot;,</span><br><span class="line">      backgroundColor:&apos;#ffffff&apos;, </span><br><span class="line">      handleIcon: &apos;M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z&apos;,</span><br><span class="line">      handleStyle: &#123;</span><br><span class="line">        color: &apos;#fff&apos;,</span><br><span class="line">        shadowBlur: 3,</span><br><span class="line">        shadowColor: &apos;rgba(0, 0, 0, 0.6)&apos;,</span><br><span class="line">        shadowOffsetX: 2,</span><br><span class="line">        shadowOffsetY: 2</span><br><span class="line">      &#125;,</span><br><span class="line">      show: true,</span><br><span class="line">      height:&apos;2%&apos;,</span><br><span class="line">      xAxisIndex: 0,</span><br><span class="line">      left: &apos;100&apos;,</span><br><span class="line">      right: &apos;100&apos;,</span><br><span class="line">      bottom: 40,</span><br><span class="line">      start: 0,</span><br><span class="line">      end: 45 //初始化滚动条</span><br><span class="line">    &#125;],</span><br><span class="line">    xAxis: &#123;</span><br><span class="line">        type: &apos;category&apos;,</span><br><span class="line">        axisLabel: &#123;</span><br><span class="line">            color: &apos;#333333&apos;</span><br><span class="line">        &#125;,</span><br><span class="line">        axisLine: &#123;</span><br><span class="line">            lineStyle: &#123;</span><br><span class="line">                color: &apos;#B3B3B3&apos;</span><br><span class="line">            &#125;,</span><br><span class="line">            width: 5</span><br><span class="line">        &#125;,</span><br><span class="line">        axisTick: &#123;</span><br><span class="line">            show: false,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    yAxis: &#123;</span><br><span class="line">        type: &apos;value&apos;,</span><br><span class="line">        axisLabel: &#123;</span><br><span class="line">            show:false,</span><br><span class="line">            color: &apos;#96A4F4&apos;</span><br><span class="line">        &#125;,</span><br><span class="line">        axisLine: &#123;</span><br><span class="line">            show:false,</span><br><span class="line">            lineStyle: &#123;</span><br><span class="line">                color: &apos;#96A4F4&apos;</span><br><span class="line">            &#125;,</span><br><span class="line">            width: 5</span><br><span class="line">        &#125;,</span><br><span class="line">        axisTick: &#123;</span><br><span class="line">            show: false,</span><br><span class="line">        &#125;,</span><br><span class="line">        splitLine: &#123;</span><br><span class="line">            show:false,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    series: [</span><br><span class="line">        &#123;</span><br><span class="line">            name: &apos;总资产&apos;,</span><br><span class="line">            type: &apos;bar&apos;,</span><br><span class="line">            stack: &apos;总量&apos;,</span><br><span class="line">            barWidth: &apos;10px&apos;,</span><br><span class="line">            itemStyle:&#123;</span><br><span class="line">                normal:&#123;</span><br><span class="line">                    color:&apos;#2461DB&apos;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            label: &#123;</span><br><span class="line">                show: false,</span><br><span class="line">                position: &apos;insideRight&apos;</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,&#123;</span><br><span class="line">            name: &apos;净资产&apos;,</span><br><span class="line">            type: &apos;bar&apos;,</span><br><span class="line">            stack: &apos;总量&apos;,</span><br><span class="line">            barWidth: &apos;10px&apos;,</span><br><span class="line">            itemStyle:&#123;</span><br><span class="line">                normal:&#123;</span><br><span class="line">                    color:&apos;#13C2C2&apos;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            label: &#123;</span><br><span class="line">                show: false,</span><br><span class="line">                position: &apos;insideRight&apos;</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,&#123;</span><br><span class="line">            name: &apos;负债总额&apos;,</span><br><span class="line">            type: &apos;line&apos;,</span><br><span class="line">            stack: &apos;总量2&apos;,</span><br><span class="line">            symbol:&apos;circle&apos;,</span><br><span class="line">            symbolSize:&apos;6&apos;,</span><br><span class="line">            label: &#123;</span><br><span class="line">                show: false,</span><br><span class="line">                position: &apos;insideRight&apos;</span><br><span class="line">            &#125;,</span><br><span class="line">            itemStyle:&#123;</span><br><span class="line">                normal:&#123;</span><br><span class="line">                    color:&apos;#51AAFF&apos;,</span><br><span class="line">                    borderColor:&apos;#FFFFFF&apos;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            lineStyle:&#123;</span><br><span class="line">              normal:&#123;</span><br><span class="line">                  color:&apos;#51AAFF&apos;,</span><br><span class="line">                  lineWidth:&apos;2px&apos;</span><br><span class="line">              &#125;  </span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>当选择拓展属性-覆盖的时候，Smartbi的图表配置项将失效，数据集数据需要通过使用宏代码的形式填充绑定。</p>
</blockquote>
<p>编辑宏代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">// 宏代码范例：Smartbi中右键点击报表-编辑宏-右键点击客户端模块-新建模块</span><br><span class="line">// 类型-ClientSide 事件-beforeRender 对象-chart</span><br><span class="line"></span><br><span class="line">// 创建执行主函数，传入chart对象</span><br><span class="line">function main(chartView)&#123;</span><br><span class="line">    // 设置需要绑定的数据字段变量</span><br><span class="line">    var nameFieldAlias = &apos;日期&apos;,</span><br><span class="line">        valueFieldAlias1 = &apos;总资产&apos;,</span><br><span class="line">        valueFieldAlias2 = &apos;净资产&apos;,</span><br><span class="line">        valueFieldAlias3 = &apos;负债总额&apos;;</span><br><span class="line">    </span><br><span class="line">    // 获取图表配置项</span><br><span class="line">    var option = chartView.getChartObject().getOption();</span><br><span class="line">    var allData = option.allFieldsData;</span><br><span class="line">    </span><br><span class="line">    // 当数据为空是直接结束</span><br><span class="line">    if (!allData)&#123;</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // 定义字段索引</span><br><span class="line">    var nameFieldIndex,valueFieldIndex1,valueFieldIndex2,valueFieldIndex3;</span><br><span class="line">    </span><br><span class="line">    // 查找字段对应的索引</span><br><span class="line">    var fields = allData.field;</span><br><span class="line">    for (var i in fields)&#123;</span><br><span class="line">        if (fields[i].alias == nameFieldAlias)&#123;</span><br><span class="line">            nameFieldIndex = i;</span><br><span class="line">        &#125; else if (fields[i].alias == valueFieldAlias1)&#123;</span><br><span class="line">            valueFieldIndex1 = i;</span><br><span class="line">        &#125; else if (fields[i].alias == valueFieldAlias2)&#123;</span><br><span class="line">            valueFieldIndex2 = i;</span><br><span class="line">        &#125; else if (fields[i].alias == valueFieldAlias3)&#123;</span><br><span class="line">            valueFieldIndex3 = i;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // 组合所需要的数据变量</span><br><span class="line">    if (baneFieldIndex &gt;=0 &amp;&amp; valueFieldIndex1 &gt;=0 &amp;&amp; valueFieldIndex2 &gt;=0 &amp;&amp; valueFieldIndex3 &gt;=0)&#123;</span><br><span class="line">        var axisData = [],</span><br><span class="line">            seriesData1 = [],</span><br><span class="line">            seriesData2 = [],</span><br><span class="line">            seriesData3 = [];</span><br><span class="line">        </span><br><span class="line">        // 遍历数据集，填充数据</span><br><span class="line">        for (var i in allData.data)&#123;</span><br><span class="line">            var item = =allData[m];</span><br><span class="line">            axisData.push(item[nameFieldIndex].displayValue);</span><br><span class="line">            seriesData1.push(item[valueFieldIndex1].displayValue);</span><br><span class="line">            seriesData2.push(item[valueFieldIndex2].displayValue);</span><br><span class="line">            seriesData3.push(item[valueFieldIndex3].displayValue);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        // 配置项初始化</span><br><span class="line">        option.xAxis.data = axisData;</span><br><span class="line">        option.series[0].data = seriesData1;</span><br><span class="line">        option.series[1].data = seriesData2;</span><br><span class="line">        option.series[2].data = seriesData3;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        console.log(&apos;未找到作用于图表的对应字段&apos;+namefieldAlias);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行后即可查看图形样式，将原始被固定的数据值改为数据集中的数据。</p>
<p><img src="http://wx2.sinaimg.cn/mw690/007FUZQ3ly1gj0ca6v4bmj30l10ha0tr.jpg" alt="image"></p>
<blockquote>
<p>此外，还可以通过宏的形式覆盖样式，如果宏和拓展属性中同事声明相同的配置项，则以宏内的配置为准。</p>
</blockquote>
<h3 id="页面浏览"><a href="#页面浏览" class="headerlink" title="页面浏览"></a>页面浏览</h3><p><code>F11</code>打开浏览器控制台，并将页面显示切换至<code>手机模式</code>。</p>
<p><img src="http://wx4.sinaimg.cn/mw690/007FUZQ3ly1gitewj4lwhj312t0jz44z.jpg" alt="image"></p>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="false">
                <source type="audio/mpeg" src="">
            </audio>
            
                <ul id="audio-list" style="display:none">
                    
                        <li title='0' data-url='https://music.163.com/song/media/outer/url?id=536622304.mp3'></li>
                    
                </ul>
            
        </div>
       
     <!--baidu share-->
     <div class="bdsharebuttonbox"><a href="#" class="bds_more" data-cmd="more"></a><a href="#" class="bds_qzone" data-cmd="qzone"></a><a href="#" class="bds_tsina" data-cmd="tsina"></a><a href="#" class="bds_tqq" data-cmd="tqq"></a><a href="#" class="bds_renren" data-cmd="renren"></a><a href="#" class="bds_weixin" data-cmd="weixin"></a></div>
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdPic":"","bdStyle":"0","bdSize":"16"},"share":{},"image":{"viewList":["qzone","tsina","tqq","renren","weixin"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["qzone","tsina","tqq","renren","weixin"]}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/static/api/js/share.js?v=89860593.js?'];</script>

    <!--安装来必力-->
    <!-- 来必力City版安装代码 -->
<div id="lv-container" data-id="city" data-uid="MTAyMC80MzI0OC8xOTc5NA==">
<script type="text/javascript">
   (function(d, s) {
       var j, e = d.getElementsByTagName(s)[0];

       if (typeof LivereTower === 'function') { return; }

       j = d.createElement(s);
       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
       j.async = true;

       e.parentNode.insertBefore(j, e);
   })(document, 'script');
</script>
<noscript>为正常使用来必力评论功能请激活JavaScript</noscript>
</div>
<!-- City版安装代码已完成 -->
    
    <!--生成目录-->
    
        <div class='side'>
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#项目简介"><span class="toc-number">1.</span> <span class="toc-text">项目简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#常用工具"><span class="toc-number">1.1.</span> <span class="toc-text">常用工具</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#图形可视化"><span class="toc-number">2.</span> <span class="toc-text">图形可视化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#技术栈"><span class="toc-number">2.1.</span> <span class="toc-text">技术栈</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Echarts"><span class="toc-number">2.1.1.</span> <span class="toc-text">Echarts</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HTML-amp-CSS"><span class="toc-number">2.1.2.</span> <span class="toc-text">HTML&amp;CSS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Javascript"><span class="toc-number">2.1.3.</span> <span class="toc-text">Javascript</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#图表分类"><span class="toc-number">2.2.</span> <span class="toc-text">图表分类</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Smartbi可视化报表开发"><span class="toc-number">3.</span> <span class="toc-text">Smartbi可视化报表开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建数据源"><span class="toc-number">3.1.</span> <span class="toc-text">创建数据源</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建数据集"><span class="toc-number">3.2.</span> <span class="toc-text">创建数据集</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建电子表格"><span class="toc-number">3.3.</span> <span class="toc-text">创建电子表格</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#需求拆分"><span class="toc-number">3.4.</span> <span class="toc-text">需求拆分</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#开发规范"><span class="toc-number">3.4.1.</span> <span class="toc-text">开发规范</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#页签"><span class="toc-number">3.4.2.</span> <span class="toc-text">页签</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#背景色"><span class="toc-number">3.4.3.</span> <span class="toc-text">背景色</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#背景图"><span class="toc-number">3.4.4.</span> <span class="toc-text">背景图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#绘图板"><span class="toc-number">3.4.5.</span> <span class="toc-text">绘图板</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#页面开发流程"><span class="toc-number">3.5.</span> <span class="toc-text">页面开发流程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Echarts图表开发"><span class="toc-number">3.5.1.</span> <span class="toc-text">Echarts图表开发</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#复杂图表开发"><span class="toc-number">3.5.2.</span> <span class="toc-text">复杂图表开发</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#页面浏览"><span class="toc-number">3.6.</span> <span class="toc-text">页面浏览</span></a></li></ol></li></ol>
        </div>
    

   
</div>


    </div>
</div>
</body>

<script src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/diaspora.js"></script>
<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">
<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>




</html>
